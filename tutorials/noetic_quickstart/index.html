<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Quickstart with Foxglove - MuSHR: The UW Open Racecar Project</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://mushr.io/favicon.png><link rel=stylesheet href=/css/style.min.d6c2c7df4a2b74e47c295ee499fec19eb99dfe63f90766a829090f557e381bdc.css></head><body class='page page-tutorials-single'><div id=main-menu-mobile class=main-menu-mobile><ul><li class="menu-item-quickstart active"><a href=/tutorials/noetic_quickstart/><span>Quickstart</span></a></li><li class=menu-item-about><a href=/about/><span>About</span></a></li><li class=menu-item-docs><a href=https://github.com/prl-mushr/mushr#component-documentation><span>Docs</span></a></li><li class=menu-item-hardware><a href=/hardware/><span>Hardware</span></a></li><li class="menu-item-tutorials active"><a href=/tutorials/><span>Tutorials</span></a></li><li class=menu-item-press><a href=/press/><span>Press</span></a></li><li class=menu-item-team><a href=https://personalrobotics.cs.washington.edu/people/><span>Team</span></a></li><li class=menu-item-forum><a href=https://github.com/prl-mushr/mushr/discussions><span>Community Forum</span></a></li><li class=menu-item-contact><a href=/contact/><span>Contact</span></a></li></ul></div><div class=wrapper><div class=header><div class=container><div class=logo><a href=https://mushr.io/><img alt="Figurit Homepage" src=https://mushr.io/imgs/mushr-logo.svg></a></div><div class=logo-mobile><a href=https://mushr.io/><img alt="Figurit Homepage" src=https://mushr.io/imgs/mushr-logo.svg></a></div><div id=main-menu class=main-menu><ul><li class="menu-item-quickstart active"><a href=/tutorials/noetic_quickstart/><span>Quickstart</span></a></li><li class=menu-item-about><a href=/about/><span>About</span></a></li><li class=menu-item-docs><a href=https://github.com/prl-mushr/mushr#component-documentation><span>Docs</span></a></li><li class=menu-item-hardware><a href=/hardware/><span>Hardware</span></a></li><li class="menu-item-tutorials active"><a href=/tutorials/><span>Tutorials</span></a></li><li class=menu-item-press><a href=/press/><span>Press</span></a></li><li class=menu-item-team><a href=https://personalrobotics.cs.washington.edu/people/><span>Team</span></a></li><li class=menu-item-forum><a href=https://github.com/prl-mushr/mushr/discussions><span>Community Forum</span></a></li><li class=menu-item-contact><a href=/contact/><span>Contact</span></a></li></ul></div><button id=toggle-main-menu-mobile class="hamburger hamburger--slider" role=presentation aria-label="mobile menu trigger">
<span class=hamburger-box><span class=hamburger-inner></span></span></button></div></div><div class="container pb-6 pt-6 pt-md-10 pb-md-10"><div class="row justify-content-start"><div class="col-12 col-md-8"><div class="tutorial tutorial-single"><h1 class=title>Quickstart with Foxglove</h1><div class=content><p>Get the MuSHR Sim working on your computer!</p><h4 class=properties>Beginner Tutorial | Expected duration is 30 minutes</h4><h2>By: <a href=https://mushr.io/>Madison Doerr</a></h2><br><figure><img src=/tutorials/first_steps/firststep.jpg width=800></figure></br><h3 id=introduction>Introduction</h3><p>Learn how to simulate the MuSHR Car with Foxglove visualizations.</p><h3 id=requirements>Requirements</h3><ul><li><strong>A MacOS or Linux machine</strong></li></ul><h2 id=installing-docker>Installing Docker</h2><p>First, install <a href=https://docs.docker.com/get-docker/>Docker</a> and <a href=https://docs.docker.com/compose/install/>Docker Compose</a> for your machine. The Docker version should be 20+, and Docker Compose version should be 1.29+. Ensure that Docker is running.</p><p>If on Linux, follow the <a href=https://docs.docker.com/engine/install/linux-postinstall/>post install</a> steps to make sure you can run Docker without root privileges.</p><h2 id=installing-mushr-docker-container>Installing MuSHR Docker Container</h2><p>Make <code>catkin_ws</code> where all the code will be.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ mkdir -p catkin_ws/src
</span></span><span class=line><span class=cl>$ <span class=nb>cd</span> catkin_ws/src
</span></span></code></pre></div><p>Clone the MuSHR repository</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git clone --branch noetic https://github.com/prl-mushr/mushr.git
</span></span></code></pre></div><p>Run the installation script. It will prompt you with two questions. For running the MuSHR simulator, the answers should be no, no. This will install a series of necessary packages, and create a script <code>mushr_noetic</code> in <code>/usr/local/bin</code> which initializes a docker container with all of the mushr configs installed. Note it attaches the <code>catkin_ws</code> volume so you can edit code outside or inside the docker container. Other files made inside the docker container will not persist unless you commit (see FAQ).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ./mushr/mushr_utils/install/mushr_install.bash
</span></span></code></pre></div><p>Close the terminal and open a new one. Then run</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ mushr_noetic
</span></span></code></pre></div><p>This should start up the Docker container. (The first time running this command will take some time to download the Docker image.) If the prefix switches to <code>root</code>, the installation was successful. If not, please check the &ldquo;Troubleshooting&rdquo; section at the end of the tutorial.</p><p>In the same terminal (within the Docker container), build the MuSHR software stack.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>cd</span> catkin_ws <span class=o>&amp;&amp;</span> catkin build
</span></span><span class=line><span class=cl>$ <span class=nb>cd</span> ~
</span></span><span class=line><span class=cl>$ <span class=nb>source</span> .bashrc
</span></span></code></pre></div><h2 id=downloading-foxglove-studio>Downloading Foxglove Studio</h2><p>Since we can run the MuSHR stack now, we can use Foxglove Studio to visualize our robot and map.</p><p>First, download <a href=https://foxglove.dev/download>Foxglove Studio</a>. Foxglove is
still in development and has many features that are added frequently, so make sure to download the most
recent version, or update it if you already have it downloaded.</p><p>Open Foxglove Studio, and click the &ldquo;Layouts&rdquo; button on the left panel (second from top) and then click
<code>Import layout</code> button pictured below.<figure><img src=/tutorials/noetic_quickstart/foxglove_layout.png width=400></figure></p><p>Import the preset layout from:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mushr/mushr_utils/foxglove/foxglove_layout.json
</span></span></code></pre></div><p>Next, click the &ldquo;Extensions&rdquo; button on the left panel (bottom) and then find the extension called &ldquo;mushr&rdquo;. The author is uwprl. Press install.</p><p>After both of the above steps, three panels should appear after selecting this layout, as pictured below. The left panel is for the data source, the central panel is for the map, and the right panel is for teleop driving.</p><figure><img src=/tutorials/noetic_quickstart/layout_example.png width=700></figure><p>The layout can be edited with the <code>Add panel</code> button on the left sidebar if desired.</p><h2 id=connecting-to-data-with-foxglove-studio>Connecting to Data With Foxglove Studio</h2><p>Now that Foxglove is set up, we can connect the visualization to our Docker container ROS setup. Start the Docker container:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ mushr_noetic
</span></span></code></pre></div><p>Once the <code>root</code> prompt appears, source <code>~/.bashrc</code>. Note that this does not occur automatically in the Docker container.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>source</span> ~/.bashrc
</span></span></code></pre></div><p>In the same terminal, start up the simulator with the command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ roslaunch mushr_sim teleop.launch
</span></span></code></pre></div><p>After starting up, the simulator should print out a line similar to</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Rosbridge WebSocket server started at ws://0.0.0.0:9090
</span></span></code></pre></div><p>In Foxglove, click the top button in the sidebar, labeled <code>Data source</code>. Then select the Plus button in the left panel. This should open up an interface to connect to data.</p><figure><img src=/tutorials/noetic_quickstart/data_panel.png width=400></figure><p>Click the <code>Open Connection</code> button. Select <code>Rosbridge (ROS 1 & ROS 2)</code> as shown below.</p><figure><img src=/tutorials/noetic_quickstart/rosbridge.png width=700></figure><p>Fill out the WebSocket URL with the url and port that the simulator output before, as shown in the image. The URL may differ from pictured. Then, click <code>Open</code> in the bottom right corner. The left sidebar should show that a connection has been made. The map should update and the car pose arrow should appear in the map panel in the center. The car can be driven using the right teleop panel.</p><figure><img src=/tutorials/noetic_quickstart/example.png width=900></figure><h3 id=moving-the-robot>Moving the robot</h3><p>You may want to change the starting point of the robot. You&rsquo;ll notice the panel in the bottom right which has a button called &ldquo;Set Pose.&rdquo; Make sure this is selected. Then, in the middle pannel, you&rsquo;ll see a point button. You&rsquo;ll want to change it from &ldquo;Publish point&rdquo; to &ldquo;Publish pose,&rdquo; as shown in the screenshot below. You can do this by pressing and holding the button. Then, you&rsquo;ll be able to select the button, and set the pose by pressing on the map, once for location, and a second to specify the direction.</p><figure><img src=/tutorials/noetic_quickstart/set_pose_example.png width=400></figure><h4 id=uses-of-set-goal-and-set-pose-estimate>Uses of &ldquo;Set Goal&rdquo; and &ldquo;Set Pose Estimate&rdquo;</h4><p>When attempting autonomous navigation (<a href=https://mushr.io/tutorials/noetic-navigation/>see this tutorial</a>), &ldquo;Set Goal&rdquo; will allow you to specify a location the car should navigate to.</p><p>When running on a real robot, and the particle filter is having trouble localizing, you&rsquo;ll want to use &ldquo;Set Pose Estimate&rdquo;. In simulation, the pose, or location of the car, is deterministic, but when running on the real robot using a particle filter, we only have access to the best estimate of the robot&rsquo;s pose.</p><h3 id=changing-the-map>Changing the map</h3><p>The map can be changed by editing the following file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>src/mushr_sim/launch/teleop.launch
</span></span></code></pre></div><p>In this file, edit the line:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;arg</span> <span class=na>name=</span><span class=s>&#34;map&#34;</span> <span class=na>default=</span><span class=s>&#34;$(find mushr_sim)/maps/sandbox.yaml&#34;</span><span class=nt>/&gt;</span>
</span></span></code></pre></div><p>to specify a different map. MuSHR provides some basic maps, but if you want to map your own space, try the <a href=/tutorials/mapping>SLAM Tutorial for MuSHR</a>.</p><h2 id=troubleshooting>Troubleshooting</h2><h4 id=docker-error-while-fetching-server-api-version>Docker: Error while fetching server API version</h4><p>Ensure that Docker is running. In your terminal, <code>docker ps -a</code> should not cause an error.</p><h4 id=docker-network-mode-is-incompatible-with-port-bindings>Docker: network mode is incompatible with port bindings</h4><p>Navigate to the install directory <code>mushr/mushr_utils/install</code>. Edit the <code>docker-compose-cpu.yml</code> file in this folder to remove the line: <code>network_mode: "host"</code>.</p><h4 id=wlan0-device-not-found>wlan0: Device not found</h4><p>Edit the <code>.bashrc</code> file in the Docker container and manually set the <code>ROS_IP</code> to the IP of your Docker container.
One way to find this is to run the following command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ifconfig
</span></span></code></pre></div><p>After manually setting this value, make to source the <code>.bashrc</code> in the Docker container.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>source</span> ~/.bashrc
</span></span></code></pre></div><h4 id=error-get-httpsregistry-1dockeriov2-dial-tcp-lookup-registry-1dockerio-on-153-read-udp-142546-153-read-connection-refused>ERROR: Get <a href=https://registry-1.docker.io/v2/>https://registry-1.docker.io/v2/</a>: dial tcp: lookup registry-1.docker.io on [::1]:53: read udp [::1]:42546->[::1]:53: read: connection refused</h4><p>This error seems to stem from a <a href=https://github.com/docker/cli/issues/2618>nameserver issue</a>. Add the following to <code>/etc/resolv.conf</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nameserver 8.8.8.8
</span></span><span class=line><span class=cl>nameserver 8.8.4.4
</span></span></code></pre></div><h2 id=faq>FAQ</h2><h4 id=i-installed-some-packages-in-my-docker-container-how-can-i-save-them-for-next-time-i-run-mushr_noetic>I installed some packages in my docker container, how can I &ldquo;save&rdquo; them for next time I run <code>mushr_noetic</code></h4><p>You can save this using the <code>docker commit</code> command. First find your container ID</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ docker ps
</span></span></code></pre></div><p>It should be the only one or the one with <code>mushr/mushr:XXX</code> under the image name (XXX different on different systems). Now commit the CONTAINER ID to the IMAGE name. For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ docker commit de878d464895 mushr/mushr:x86_64
</span></span></code></pre></div></div></div></div></div></div><div class="strip strip-primary-gradient-top-bottom"><div class="container pt-3 pb-3 pt-md-6 pb-md-3 px-2"><div class="row justify-content-left citation-row"><h1 id=citation>Citation</h1><p>If you plan to use any part of the the MuSHR platform (including tutorials, codebase, or hardware instructions) for a project or paper, please cite
<em><a href=https://arxiv.org/abs/1908.08031>MuSHR: A Low-Cost, Open-Source Robotic Racecar for Education and Research</a></em>.</p><div class=highlight><pre class=chroma>@article{srinivasa2019mushr,
 title={{MuSHR}: A Low-Cost, Open-Source Robotic Racecar for Education and Research},
 author={Srinivasa, Siddhartha S. and Lancaster, Patrick and Michalove, Johan and Schmittle, Matt and Summers, Colin and Rockett, Matthew and Smith, Joshua R. and Chouhury, Sanjiban and Mavrogiannis, Christoforos and Sadeghi, Fereshteh},
 journal={CoRR},
 volume={abs/1908.08031},
 year={2019}
}
</pre></div><br></div></div></div></div><div class=footer><div class=container><div class=row><div class=col-12><div class=footer-inner><h3 class=footer-title>MuSHR: The UW Open Racecar Project</h3><ul><li class=menu-item-forum><a href=https://github.com/prl-mushr/mushr/discussions>Community Forum</a></li><li class=menu-item-contact><a href=/contact/>Contact</a></li><li class=menu-item-home><a href=/>Home</a></li></ul></div></div></div></div></div><div class=sub-footer><div class=container><div class=row><div class=col-12><div class=sub-footer-inner><ul></ul><ul><li class=prl>Made with <font color=#FF1690>♥</font> at the <a href=https://personalrobotics.cs.washington.edu/>Personal Robotics Lab</a></li></ul><ul><li class=prl>Website by <a href=https://micha.love/><font color=#36CDC4>Johan</font></a></li></ul></div></div></div></div></div><script type=text/javascript src=/js/scripts.min.8504133605a277da18f0d58cfd2e90d154962f4a961543a6e2f0a459a2d05462.js></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-146151202-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-146151202-1")</script></body></html>