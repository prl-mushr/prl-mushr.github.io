<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quickstart - MuSHR: The UW Open Racecar Project</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="https://mushr.io/favicon.png">

  
  
  <link rel="stylesheet" href="/css/style.min.27a096120a5b9a88eee134a2f60f76945796034b0458b4ab5a6de4e4e59b2ae5.css">
  

  

</head>

<body class='page page-tutorials-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-quickstart">
      <a href="/tutorials/quickstart/">
        
        <span>Quickstart</span>
      </a>
    </li>
    
    <li class="menu-item-tutorials">
      <a href="/tutorials/">
        
        <span>Tutorials</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="https://github.com/prl-mushr/mushr#component-documentation">
        
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-hardware">
      <a href="/hardware/">
        
        <span>Hardware</span>
      </a>
    </li>
    
    <li class="menu-item-team">
      <a href="/team/">
        
        <span>Team</span>
      </a>
    </li>
    
    <li class="menu-item-about">
      <a href="/about/">
        
        <span>About</span>
      </a>
    </li>
    
    <li class="menu-item-contact">
      <a href="/contact/">
        
        <span>Contact</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="https://mushr.io/"><img alt="Figurit Homepage" src="https://mushr.io/imgs/mushr-logo.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="https://mushr.io/"><img alt="Figurit Homepage" src="https://mushr.io/imgs/mushr-logo.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-quickstart">
      <a href="/tutorials/quickstart/">
        
        <span>Quickstart</span>
      </a>
    </li>
    
    <li class="menu-item-tutorials">
      <a href="/tutorials/">
        
        <span>Tutorials</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="https://github.com/prl-mushr/mushr#component-documentation">
        
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-hardware">
      <a href="/hardware/">
        
        <span>Hardware</span>
      </a>
    </li>
    
    <li class="menu-item-team">
      <a href="/team/">
        
        <span>Team</span>
      </a>
    </li>
    
    <li class="menu-item-about">
      <a href="/about/">
        
        <span>About</span>
      </a>
    </li>
    
    <li class="menu-item-contact">
      <a href="/contact/">
        
        <span>Contact</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" role="presentation" aria-label="mobile menu trigger">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>
    
<div class="container pb-6 pt-6 pt-md-10 pb-md-10">
  <div class="row justify-content-start">
    <div class="col-12 col-md-8">
      <div class="tutorial tutorial-single">
        <h1 class="title">Quickstart</h1>
        <div class="content"> 
          
          <p>Run the MuSHR platform on your machine!</p> 
          
          <h4 class="properties">Beginner Tutorial | Expected duration is 30 minutes</h4> 
          

<p><figure>
    <img src="/tutorials/quickstart/quickstart_header.gif" width="800"/> 
</figure>

<br></p>

<h3 id="introduction">Introduction</h3>

<p>This tutorial will get you started with MuSHR in simulation!</p>

<h3 id="goal">Goal</h3>

<p>To get the simulator running on your machine so that you can begin hacking immediately!</p>

<h3 id="requirements">Requirements</h3>

<p>A linux machine (OSX and Windows support coming soon!). If you don&rsquo;t run linux natively then get a linux VM: <a href="https://www.instructables.com/id/How-to-Create-an-Ubuntu-Virtual-Machine-with-Virtu/">OSX</a>, <a href="https://itsfoss.com/install-linux-in-virtualbox/">Windows</a>.</p>

<h2 id="setup">Setup</h2>

<p>First we need to make sure you have a few dependencies installed. To make it easier, we have created a docker container with the MuSHR stack and sim running inside it. Here is what you need:</p>

<ul>
<li><a href="https://docs.docker.com/v17.12/install/">docker</a></li>
<li><a href="https://docs.docker.com/compose/install/">docker-compose</a></li>
<li>git</li>
<li>A github account. You can signup for one <a href="https://github.com/join?source=header-home">here</a></li>
<li>An NVIDIA graphics card</li>
</ul>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo apt install git-all</code></pre></div>

<p>Once you have these, you&rsquo;re good to go!</p>

<h2 id="install-sim">Install Sim</h2>

<p>Now that we have the dependencies, lets get started! Note, we are assuming you have set up Docker to not need sudo with every call. You can set that up by following <a href="https://docs.docker.com/install/linux/linux-postinstall/">these</a> steps. Now, open a terminal (CTRL + ALT + T) check if Docker is running:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ docker run hello-world</code></pre></div>

<p>If you get a error then run:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ systemctl start docker</code></pre></div>

<p>Let&rsquo;s clone the sim repo:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ git clone https://github.com/prl-mushr/mushr_sim <span class="o">&amp;&amp;</span> <span class="nb">cd</span> mushr_sim/docker/</code></pre></div>

<p>Alright, so you are in the Docker directory of the sim. There are two configuration changes we need to make. First let&rsquo;s change the uid/gid of your Docker user to match the current user. This is required for GUI apps like rviz to connect. Check your UID/GID with the following command:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ id -u <span class="nv">$USER</span></code></pre></div>

<p>for UID and:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ id -g <span class="nv">$USER</span></code></pre></div>

<p>for GID. They usually are the same. Now that you know these values use your favorite text editor to change line 4 in Dockerfile. We will use gedit here:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ gedit Dockerfile</code></pre></div>

<p>And change line 4&rsquo;s UID/GID to match yours. The last configuration we need to do is make sure your NVIDIA driver matches the one the sim is looking for. This is required because OpenGL is needed for rviz. To see which NVIDIA driver your computer has run:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ls /usr/lib/ <span class="p">|</span> grep nvidia</code></pre></div>

<p>The default is <code>nvidia-390</code>. If your&rsquo;s is not that then open <code>.env</code> and change the number to match:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ gedit .env</code></pre></div>

<p>That&rsquo;s it for setting up! We&rsquo;re done the hard part :)</p>

<h2 id="run-sim">Run Sim</h2>

<p>To start the sim run:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ docker-compose up -d</code></pre></div>

<p>You should see a small gray window pop up and rviz with the car model (see below). We&rsquo;ve just created a container that you can see if you run:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ docker ps</code></pre></div>

<figure>
    <img src="/tutorials/quickstart/rviz_docker.png"
         alt="The rviz window that should pop up after running docker-compose." width="800"/> <figcaption>
            <p>The rviz window that should pop up after running <code>docker-compose</code>.</p>
        </figcaption>
</figure>


<p>Give the car an initial position by clicking <code>2D Pose Estimate</code> in rviz and clicking and dragging in the main window. Now you can click on the small gray window and use the WSAD keys to drive the car around!</p>

<h2 id="going-further">Going Further</h2>

<p>Driving the car around is fun, but what if you want to program it? In order to do that you must enter the container and write code like you would on a normal ROS linux system. The remaining tutorials that use the simulator assume you are in the container. To enter the container while everything else is running, run:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ docker <span class="nb">exec</span> -it CONTAINER-ID bash</code></pre></div>

<p>You can get the <code>CONTAINER-ID</code> from:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ docker ps</code></pre></div>

<p>This gets you a bash shell inside the container. You will find all the sim code in <code>~/catkin_ws/src/mushr_sim</code>. The user developer will not have root privileges, so you cannot install software. To enter the container as root run:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ docker <span class="nb">exec</span> -it -u <span class="m">0</span> CONTAINER-ID bash</code></pre></div>

<p>By being root you can install additional software that you may want.</p>

<p>You can also separate launching the container from launching the sim. To do that edit line 16 in <code>docker-compose.yml</code> to <code>entrypoint: bash</code>. Then run:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ docker-compose build
$ docker-compose up -d</code></pre></div>

<p>Then enter the container</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ docker <span class="nb">exec</span> -it CONTAINER-ID bash</code></pre></div>

<p>And source your workspace.</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ . ~/.bashrc</code></pre></div>

<p>You can start the sim with:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ roslaunch mushr_sim teleop.launch</code></pre></div>

<p>And start rviz with:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ rviz</code></pre></div>

<p>To learn about programming the car continue to the <a href="/tutorials/intro-to-ros">Intro to ROS Tutorial</a></p>

        </div>
      </div>
    </div>
  </div>
</div>

  </div>

  <div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="footer-inner">
          <h3 class="footer-title">MuSHR: The UW Open Racecar Project</h3>
          <ul>
            
            
            <li class="menu-item-home">
              <a href="/">
                Home
              </a>
            </li>
            
            <li class="menu-item-contact">
              <a href="/contact/">
                Contact
              </a>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            <li><strong>Email: </strong><a href="mailto:mushr@cs.washington.edu">
                mushr@cs.washington.edu</a></li>
          </ul>
          <ul>
            <li class="prl"><a href="https://personalrobotics.cs.washington.edu/">Made with <font color="#FF1690">â™¥</font> at the Personal Robotics Lab</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  

  




  <script type="text/javascript" src="/js/services.min.59bfd7d7aaf7e918e4271e11ef3cb4d91e22c83b70437eec78bdffdcd2d51c0a.js"></script>
  


  
  <script type="text/javascript" src="/js/scripts.min.bf1e1f7ae8e03db5f012356e825843facdff51c0a559cb0d27fe2bbe1db405c2.js"></script>
  

  






</body>

</html>