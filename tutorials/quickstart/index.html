<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quickstart - MuSHR: The UW Open Racecar Project</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="https://mushr.io/favicon.png">

  
  
  <link rel="stylesheet" href="/css/style.min.d6c2c7df4a2b74e47c295ee499fec19eb99dfe63f90766a829090f557e381bdc.css">
  

  

</head>

<body class='page page-tutorials-single'>
  
<div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    <li class="menu-item-quickstart active">
      <a href="/tutorials/quickstart/"><span>Quickstart</span></a>
    </li>
    <li class="menu-item-about">
      <a href="/about/"><span>About</span></a>
    </li>
    <li class="menu-item-docs">
      <a href="https://github.com/prl-mushr/mushr#component-documentation"><span>Docs</span></a>
    </li>
    <li class="menu-item-hardware">
      <a href="/hardware/"><span>Hardware</span></a>
    </li>
    <li class="menu-item-tutorials">
      <a href="/tutorials/"><span>Tutorials</span></a>
    </li>
    <li class="menu-item-press">
      <a href="/press/"><span>Press</span></a>
    </li>
    <li class="menu-item-team">
      <a href="https://personalrobotics.cs.washington.edu/people/"><span>Team</span></a>
    </li>
    <li class="menu-item-forum">
      <a href="https://github.com/prl-mushr/mushr/discussions"><span>Community Forum</span></a>
    </li>
    <li class="menu-item-contact">
      <a href="/contact/"><span>Contact</span></a>
    </li>
  </ul>
</div>

  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="https://mushr.io/"><img alt="Figurit Homepage" src="https://mushr.io/imgs/mushr-logo.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="https://mushr.io/"><img alt="Figurit Homepage" src="https://mushr.io/imgs/mushr-logo.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    <li class="menu-item-quickstart active">
      <a href="/tutorials/quickstart/"><span>Quickstart</span></a>
    </li>
    <li class="menu-item-about">
      <a href="/about/"><span>About</span></a>
    </li>
    <li class="menu-item-docs">
      <a href="https://github.com/prl-mushr/mushr#component-documentation"><span>Docs</span></a>
    </li>
    <li class="menu-item-hardware">
      <a href="/hardware/"><span>Hardware</span></a>
    </li>
    <li class="menu-item-tutorials">
      <a href="/tutorials/"><span>Tutorials</span></a>
    </li>
    <li class="menu-item-press">
      <a href="/press/"><span>Press</span></a>
    </li>
    <li class="menu-item-team">
      <a href="https://personalrobotics.cs.washington.edu/people/"><span>Team</span></a>
    </li>
    <li class="menu-item-forum">
      <a href="https://github.com/prl-mushr/mushr/discussions"><span>Community Forum</span></a>
    </li>
    <li class="menu-item-contact">
      <a href="/contact/"><span>Contact</span></a>
    </li>
  </ul>
</div>

    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" role="presentation" aria-label="mobile menu trigger">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>
    
<div class="container pb-6 pt-6 pt-md-10 pb-md-10">
  <div class="row justify-content-start">
    <div class="col-12 col-md-8">
      <div class="tutorial tutorial-single">
        <h1 class="title">Quickstart</h1>
        <div class="content"> 
          
          <p>Run the MuSHR platform on your machine!</p> 
          
          <h4 class="properties">Beginner Tutorial | Expected duration is 30 minutes</h4> 
          <h2> By: <a href=https://www.mattschmittle.com/>Matt Schmittle</a></h2>                              
<figure>
<video width="800" muted autoplay loop>
  <source src="/tutorials/quickstart/quickstart_header.mp4" type="video/mp4" />
</video>



</figure>

<br>
<h3 id="introduction">Introduction</h3>
<p>This tutorial will get you started with MuSHR in simulation!</p>
<h3 id="goal">Goal</h3>
<p>To get the simulator running on your machine so that you can begin hacking immediately!</p>
<h3 id="requirements">Requirements</h3>
<ul>
<li><strong>A Ubuntu 16.04 or 18.04 Linux machine</strong> (20.04 not supported yet!). If you don&rsquo;t run linux natively you can use an <a href="https://www.freecodecamp.org/news/how-to-install-ubuntu-with-oracle-virtualbox/">Ubuntu VM</a>.</li>
</ul>
<p>We also provide a virtual machine image that already has the MuSHR stack setup, it can be downloaded <a href="https://drive.google.com/a/cs.washington.edu/file/d/1mOzSzVx9BF_e2U1OeK58NS42UIPcnIZq/view?usp=sharing">here</a>. The username is <strong>robot</strong> and the password is <strong>prl_robot</strong>. If you use this image, you can start the VM and then skip to the <a href="#running-the-simulator"><strong>Running the Simulator</strong></a> section. If you&rsquo;re using VirtualBox, here is a tutorial for <a href="https://docs.oracle.com/cd/E26217_01/E26796/html/qs-import-vm.html">setting up the virtual machine image</a>.</p>
<p>For good performance, it&rsquo;s a good idea to set the RAM used by your VM to at least 2048 MB. If using VirtualBox, navigate to Settings -&gt; System and you should see a slider
which allows you to modify RAM.</p>
<ul>
<li>
<p><strong>Window Subsystem for Linux (WSL):</strong> There has also been success getting the quickstart to run using WSL. When running <code>rivz</code> you&rsquo;ll need to disable native <code>opengl</code>. There will be a note (<a href="#wsl-users-note"><strong>Note for WSL</strong></a>) in the section running <code>rviz</code>.</p>
</li>
<li>
<p><strong>Python2.7:</strong> If you have Python3 as your default version, download <a href="https://docs.conda.io/en/latest/">Conda</a> to easily create/manage Python2.7 virtual environments.</p>
</li>
<li>
<p>To learn how to use conda environments please see the following <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">tutorial</a></p>
</li>
</ul>
<h2 id="setup">Setup</h2>
<p>First we need to make sure you have a few dependencies installed. All commands are to be executed in a terminal (CTRL + ALT + T). Here is what you need:</p>
<ul>
<li><a href="http://wiki.ros.org/melodic/Installation">ROS Melodic Desktop Full</a> (for Ubuntu 18.04) or <a href="http://wiki.ros.org/kinetic/Installation">ROS Kinetic</a> (for Ubuntu 16.04)
<em>You could also try installing ROS on another supported platform, but as of right now this tutorial has not been tested on non-Ubuntu machines.</em></li>
<li>A <a href="http://wiki.ros.org/catkin/Tutorials/create_a_workspace">catkin_ws</a></li>
<li>git:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ sudo apt install git-all</code></pre></div>
<ul>
<li>tkinter:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ sudo apt install python-tk</code></pre></div>
<ul>
<li>A github account. You can sign up for one <a href="https://github.com/join?source=header-home">here</a>.</li>
<li><a href="https://github.com/dirk-thomas/vcstool.git">vcstool</a></li>
<li><a href="https://pip.pypa.io/en/stable/installing/">pip</a></li>
</ul>
<p>Once you have these, you&rsquo;re good to go!</p>
<h2 id="install-sim">Install Sim</h2>
<p>Now that we have the dependencies, lets get started! We&rsquo;ll start by making sure we have all the necessary ROS packages. Select <strong>one</strong> of the following, based off the version of ROS you installed.</p>
<p><strong>Melodic:</strong>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ sudo apt install -y ros-melodic-ackermann-msgs ros-melodic-map-server ros-melodic-serial ros-melodic-urg-node ros-melodic-robot-state-publisher ros-melodic-xacro</code></pre></div></p>
<p><strong>Kinetic:</strong>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ sudo apt install -y ros-kinetic-ackermann-msgs ros-kinetic-map-server ros-kinetic-serial ros-kinetic-urg-node ros-kinetic-robot-state-publisher ros-kinetic-xacro</code></pre></div></p>
<p>Now, let&rsquo;s clone the necessary repos. First go to your <code>catkin_ws/src</code> directory:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">cd</span> ~/catkin_ws/src</code></pre></div>
<p>Download <a href="https://github.com/prl-mushr/mushr/blob/master/repos.yaml">repos.yaml</a> into <code>~/catkin_ws/src</code>.</p>
<p>And clone the necessary repos using vcstool:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ vcs import &lt; repos.yaml</code></pre></div>
<p>We need the realsense2_description directory only:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ mv ~/catkin_ws/src/mushr/mushr_hardware/realsense/realsense2_description ~/catkin_ws/src/mushr/mushr_hardware/realsense2_description
$ rm -rf ~/catkin_ws/src/mushr/mushr_hardware/realsense</code></pre></div>
<p>We need to also install rangelibc. First, if you don&rsquo;t have Cython installed, install it now:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ sudo pip install Cython </code></pre></div>
<p>Now that Cython&rsquo;s installed, you can install rangelibc:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">cd</span> ~/catkin_ws/src/range_libc/pywrapper
$ sudo python setup.py install
$ <span class="nb">cd</span> ~/catkin_ws/src <span class="o">&amp;&amp;</span> rm -rf range_libc</code></pre></div>
<p>We will now run <code>catkin_make</code> to setup all the packages:
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">cd</span> ~/catkin_ws <span class="o">&amp;&amp;</span> catkin_make</code></pre></div></p>
<h3 id="setting-up-our-environment">Setting up our environment</h3>
<p>To make sure our environment is setup we run:</p>
<p><em>If you are using a shell other than bash, be sure to put these &ldquo;source&rdquo; commands in the analagous file for your shell.</em></p>
<h4 id="kinetic-ubuntu-1604">Kinetic (Ubuntu 16.04)</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">echo</span> <span class="s1">&#39;source /opt/ros/kinetic/setup.bash&#39;</span> &gt;&gt; ~/.bashrc
$ <span class="nb">echo</span> <span class="s1">&#39;source ~/catkin_ws/devel/setup.bash&#39;</span> &gt;&gt; ~/.bashrc
$ . ~/.bashrc</code></pre></div>
<h4 id="melodic-ubuntu-1804">Melodic (Ubuntu 18.04)</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">echo</span> <span class="s1">&#39;source /opt/ros/melodic/setup.bash&#39;</span> &gt;&gt; ~/.bashrc
$ <span class="nb">echo</span> <span class="s1">&#39;source ~/catkin_ws/devel/setup.bash&#39;</span> &gt;&gt; ~/.bashrc
$ . ~/.bashrc</code></pre></div>
<p>Putting these lines in the <code>~/.bashrc</code> guarantee they run on the startup of a new shell.</p>
<p>Finally, move the &ldquo;Outrun&rdquo; themed <code>.rviz</code> file to <code>~/.rviz</code> to get our default setup:
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ cp ~/catkin_ws/src/mushr/mushr_utils/rviz/default.rviz ~/.rviz/</code></pre></div></p>
<p>That&rsquo;s it! Time to run it.</p>
<h2 id="running-the-simulator">Running the Simulator</h2>
<p>To start the sim run:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ roslaunch mushr_sim teleop.launch</code></pre></div>
<figure><img src="/tutorials/quickstart/teleop_window.png"
         alt="Teleop window that should appear after starting the sim" width="200"/><figcaption>
            <p>Teleop window that should appear after starting the sim</p>
        </figcaption>
</figure>

<p>And in another terminal window launch rviz:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">$ rviz</code></pre></div>
<p><span id="wsl-users-note"><strong>WSL Users Note:</strong></span> In order for Open GL to find a display you&rsquo;ll need to do an extra step to get <code>rviz</code> to work. See <a href="https://janbernloehr.de/2017/06/10/ros-windows#install-vcxsrv">Install VcXsrv</a> to get it working.</p>
<p>The <code>rviz</code> window with the car model should appear (see below). <code>Rviz</code> is useful for visualizing what the car is thinking/seeing. Currently it is set to visualize the car, map, and laserscan but <code>rviz</code> can be used for much <a href="http://wiki.ros.org/rviz/Tutorials">more</a>.</p>
<figure><img src="/tutorials/quickstart/rviz_docker-update.png"
         alt="This is an image of the rviz window that should pop up." width="800"/><figcaption>
            <p>This is an image of the <code>rviz</code> window that should pop up.</p>
        </figcaption>
</figure>

<h3 id="setting-an-initial-position">Setting an Initial Position</h3>
<p>Give the car an initial position by clicking
<figure><img src="/tutorials/quickstart/2d_pose_estimate.png" width="150"/>
</figure>
</p>
<p>in <code>rviz</code> and clicking and dragging in the main window. Now you can click on the small gray window and use the WASD keys to drive the car around! You can set the position at any time to reset the pose.</p>
<h3 id="navigating-rviz">Navigating rviz</h3>
<p>The main pane will show a map of an empty square space. The ligher areas are the space where the simulated car can drive around. The darker areas are walls.</p>
<p>Clicking and dragging will change the perspective of <code>rviz</code>, while <code>Shift + Click</code> and draging will move the map around.</p>
<h3 id="changing-the-map">Changing the map</h3>
<p>The current map is fine for driving around, but to do more interesting things you may want more interesting maps. To change the map follow these steps.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># To list what maps are available</span>
$ ls ~/catkin_ws/src/mushr/mushr_base/mushr_base/mushr_base/maps/
<span class="c1"># Open map_server.launch</span>
$ nano ~/catkin_ws/src/mushr/mushr_base/mushr_base/mushr_base/launch/includes/map_server.launch</code></pre></div>
<p>Edit <code>map_server.launch</code> to set the map to the name of the .yaml file. It should look like this, replacing map_name with the name
of the map you want to use.
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="o">&lt;</span><span class="n">launch</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">arg</span> <span class="n">name</span><span class="o">=</span><span class="s2">&#34;map&#34;</span> <span class="n">default</span><span class="o">=</span><span class="s2">&#34;$(find mushr_base)/maps/map_name.yaml&#34;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">node</span> <span class="n">pkg</span><span class="o">=</span><span class="s2">&#34;map_server&#34;</span> <span class="n">name</span><span class="o">=</span><span class="s2">&#34;map_server&#34;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&#34;map_server&#34;</span> <span class="n">args</span><span class="o">=</span><span class="s2">&#34;$(arg map)&#34;</span> <span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">launch</span><span class="o">&gt;</span></code></pre></td></tr></table>
</div>
</div></p>
<p>You can make your own maps using SLAM based techniques like <a href="http://wiki.ros.org/gmapping">gmapping</a> or <a href="https://google-cartographer-ros.readthedocs.io/en/latest/">cartographer</a>. But if you just want something quick and simple, you can make your own <code>.yaml</code> and <code>.png</code> files for the map. Use the current map files as a template. We use <a href="https://www.gimp.org/">Gimp</a> to edit the map <code>.png</code> file but you can use any image editor you like.</p>
<h2 id="going-further">Going Further</h2>
<p>To learn about programming the car, continue to the <a href="/tutorials/intro-to-ros">Intro to ROS Tutorial</a>.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>Commonly encountered problems during this tutorial.</p>
<h3 id="virtual-machines">Virtual Machines</h3>
<h4 id="failed-to-open-ovf-descriptor-when-importing-the-virtual-machine-image">Failed to open ovf descriptor when importing the virtual machine image</h4>
<p>This is a known issue with .ova file extensions downloading as .ovf from Google Suite. To fix, rename the file extension to .ova.</p>
<h4 id="cant-copy-and-paste-into-virtualbox">Can&rsquo;t copy and paste into VirtualBox</h4>
<p>Power down the virtual machine. Select Settings -&gt; General -&gt; Advanced -&gt; SharedClipboard and select bidirectional. Restart the virtual machine.</p>
<h4 id="ubuntu-runs-slowlyfreezes-on-virtualbox">Ubuntu runs slowly/freezes on VirtualBox</h4>
<p>This likely occured because the default settings for new virtual machines
are low. For better performance, it&rsquo;s a good idea to double the default memory
(from 1024 to 2048 MB). Select Settings -&gt; System and you should see a slider
which allows you to increase RAM.</p>

        </div>
      </div>
    </div>
  </div>
</div>
<div class="strip strip-primary-gradient-top-bottom">
  <div class="container pt-3 pb-3 pt-md-6 pb-md-3 px-2">
    <div class="row justify-content-left citation-row">
      <h1 id="citation">Citation</h1>
      <p>
  If you plan to use any part of the the MuSHR platform (including tutorials, codebase, or hardware instructions) for a project or paper, please cite
  <em><a href="https://arxiv.org/abs/1908.08031">MuSHR: A Low-Cost, Open-Source Robotic Racecar for Education and Research</a></em>.
</p>

<div class="highlight"><pre class="chroma">@article{srinivasa2019mushr,
 title={{MuSHR}: A Low-Cost, Open-Source Robotic Racecar for Education and Research},
 author={Srinivasa, Siddhartha S. and Lancaster, Patrick and Michalove, Johan and Schmittle, Matt and Summers, Colin and Rockett, Matthew and Smith, Joshua R. and Chouhury, Sanjiban and Mavrogiannis, Christoforos and Sadeghi, Fereshteh},
 journal={CoRR},
 volume={abs/1908.08031},
 year={2019}
}
</pre></div>

<br/>

    </div>
  </div>
</div>


  </div>

  <div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="footer-inner">
          <h3 class="footer-title">MuSHR: The UW Open Racecar Project</h3>
          <ul>
            
            
            <li class="menu-item-forum"><a href="https://github.com/prl-mushr/mushr/discussions">Community Forum</a></li>
            
            <li class="menu-item-contact"><a href="/contact/">Contact</a></li>
            
            <li class="menu-item-home"><a href="/">Home</a></li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            
          </ul>
          <ul>
            <li class="prl">Made with <font color="#FF1690">♥</font> at the <a href="https://personalrobotics.cs.washington.edu/">Personal Robotics Lab</a></li>
          </ul>
          <ul>
            <li class="prl">Website by <a href="https://micha.love/"><font color="#36CDC4">Johan</font></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>


  

  
  

  
  <script type="text/javascript" src="/js/scripts.min.98ee06cc35517b5800b382aecb0fc59893e95b9c11dd21842d0d57e4f68043e3.js"></script>
  

  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-146151202-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());
  gtag('config', 'UA-146151202-1');
</script>




</body>

</html>