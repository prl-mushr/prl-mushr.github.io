<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using the RealSense Camera - MuSHR: The UW Open Racecar Project</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="https://mushr.io/favicon.png">

  
  
  <link rel="stylesheet" href="/css/style.min.c2afc1cc4aaac1ae8d3c6236f926d4fa21d34d80395cf9445c90f953db695e44.css">
  

  

</head>

<body class='page page-tutorials-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-quickstart">
      <a href="/tutorials/quickstart/">
        
        <span>Quickstart</span>
      </a>
    </li>
    
    <li class="menu-item-about">
      <a href="/about/">
        
        <span>About</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="https://github.com/prl-mushr/mushr#component-documentation">
        
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-hardware">
      <a href="/hardware/">
        
        <span>Hardware</span>
      </a>
    </li>
    
    <li class="menu-item-tutorials">
      <a href="/tutorials/">
        
        <span>Tutorials</span>
      </a>
    </li>
    
    <li class="menu-item-press">
      <a href="/press/">
        
        <span>Press</span>
      </a>
    </li>
    
    <li class="menu-item-team">
      <a href="https://personalrobotics.cs.washington.edu/people/">
        
        <span>Team</span>
      </a>
    </li>
    
    <li class="menu-item-community forum">
      <a href="https://spectrum.chat/mushr">
        
        <span>Community Forum</span>
      </a>
    </li>
    
    <li class="menu-item-contact">
      <a href="/contact/">
        
        <span>Contact</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="https://mushr.io/"><img alt="Figurit Homepage" src="https://mushr.io/imgs/mushr-logo.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="https://mushr.io/"><img alt="Figurit Homepage" src="https://mushr.io/imgs/mushr-logo.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-quickstart">
      <a href="/tutorials/quickstart/">
        
        <span>Quickstart</span>
      </a>
    </li>
    
    <li class="menu-item-about">
      <a href="/about/">
        
        <span>About</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="https://github.com/prl-mushr/mushr#component-documentation">
        
        <span>Docs</span>
      </a>
    </li>
    
    <li class="menu-item-hardware">
      <a href="/hardware/">
        
        <span>Hardware</span>
      </a>
    </li>
    
    <li class="menu-item-tutorials">
      <a href="/tutorials/">
        
        <span>Tutorials</span>
      </a>
    </li>
    
    <li class="menu-item-press">
      <a href="/press/">
        
        <span>Press</span>
      </a>
    </li>
    
    <li class="menu-item-team">
      <a href="https://personalrobotics.cs.washington.edu/people/">
        
        <span>Team</span>
      </a>
    </li>
    
    <li class="menu-item-community forum">
      <a href="https://spectrum.chat/mushr">
        
        <span>Community Forum</span>
      </a>
    </li>
    
    <li class="menu-item-contact">
      <a href="/contact/">
        
        <span>Contact</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" role="presentation" aria-label="mobile menu trigger">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>
    
<div class="container pb-6 pt-6 pt-md-10 pb-md-10">
  <div class="row justify-content-start">
    <div class="col-12 col-md-8">
      <div class="tutorial tutorial-single">
        <h1 class="title">Using the RealSense Camera</h1>
        <div class="content"> 
          
          <p>Setup and launch the camera</p> 
          
          <h4 class="properties">Beginner Tutorial | Expected duration is 20 minutes</h4> 
          
          <h2> By: Akkshaj Singh</h2>
<h3 id="introduction">Introduction</h3>
<p>This tutorial will get your car's camera operational and teach you to modify your camera data.</p>
<h3 id="goal">Goal</h3>
<p>To get you viewing your car's live camera feed.</p>
<h3 id="requirements">Requirements</h3>
<ul>
<li>Complete the <a href="/hardware/build_instructions">hardware</a> setup with your car</li>
<li>Complete the <a href="/tutorials/quickstart">quickstart</a> tutorial. (Required for rviz)</li>
<li>Complete the <a href="/tutorials/first_steps/">first_steps</a> tutorial.</li>
<li>A desktop/laptop computer that can ssh into the car.</li>
<li>An SSH-capable text editor, like Vim or Visual Studio Code (requires the SSH plugin)</li>
</ul>
<h2 id="ssh-into-the-car">SSH into the Car</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ssh &lt;user&gt;@&lt;car ip&gt; </code></pre></div>
<p>Power on the Jetson, and SSH into the car, like in the <a href="/tutorials/first_steps/">first_steps</a> tutorial. Do this in three separate terminal windows. If you're familiar with tools like tmux or GNU Screen, feel free to use those, but they are outside the scope of the tutorial.</p>
<h2 id="ros-setup">ROS Setup</h2>
<p>Now that you're connected to the car, let's launch ROS.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ roscore </code></pre></div>
<p>Normally, we would launch tele-op here in order to be able to drive the car around, but let's try launching just the camera.</p>
<h2 id="launching-the-intel-realsense-camera">Launching the Intel RealSense Camera</h2>
<p>First, navigate to the directory containing the <code>realsense2</code> package for ROS.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">cd</span> ~/catkin_ws/src/realsense2/realsense2_camera/launch/</code></pre></div>
<p>Here, you can now launch the camera by running the launchfile. Ensure your RealSense camera is connected to the Jetson's USB port. You can verify this with the <code>lsusb</code> command.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ roslaunch rs_camera.launch</code></pre></div>
<p>If you get an error along the lines of <code>failed to find nodelet to unload</code> try reconnecting the camera to the Jetson and running the command again.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ rostopic list</code></pre></div>
<p>Run the above command, and you should be able to see the topics for the camera, like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">/camera/color/camera_info
/camera/color/image_raw</code></pre></div>
<h2 id="launching-rviz-on-your-computer">Launching RViz on your computer</h2>
<p>Set the <code>ROS_IP</code> to your IP. Your IP can be found in a variety of ways: <a href="https://ubuntu.com/server/docs/network-configuration">Linux</a>, <a href="https://www.wikihow.com/Find-Your-IP-Address-on-a-Mac">Mac</a>, <a href="https://support.microsoft.com/en-us/help/4026518/windows-10-find-your-ip-address">Windows</a>.</p>
<p>Note: the following commands in this section should be run in a terminal window connected to your local device, NOT the SSH window to the car.</p>
<p>Set <code>ROS_IP</code> with:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">export</span> <span class="nv">ROS_IP</span><span class="o">=</span>YOUR-IP</code></pre></div>
<p>Set the <code>ROS_MASTER_URI</code> to the IP of the car. (You used this to SSH into it earlier.)</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">export</span> <span class="nv">ROS_MASTER_URI</span><span class="o">=</span>http://CAR_IP_GOES_HERE:11311</code></pre></div>
<p>Now, launch RViz.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ rviz</code></pre></div>
<p>If you get errors make sure the following are correct:</p>
<ul>
<li>Teleop is running</li>
<li>Your laptop is connnected properly
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ rostopic list</code></pre></div>
This should output a bunch of camera-related topics. If not, check your <code>ROS_MASTER_URI</code> and <code>ROS_IP</code> to ensure they are correct.</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">/camera/color/camera_info
/camera/color/image_raw</code></pre></div>
<h2 id="viewing-camera-output-in-rviz">Viewing Camera Output in RViz</h2>
<figure>
    <img src="/tutorials/realsense/rvizadd.png"/> 
</figure>

<p>In your RViz window, you can add topics to view various camera feeds from the RealSense. It is able to publish RGB, Depth, and Infrared camera data. Clicking add will allow you to view those feeds, like so:
<figure>
    <img src="/tutorials/realsense/rvizcamtopics.png"
         alt="Adding the Color Input from the RealSense. Other inputs are also visible."/> <figcaption>
            <p>Adding the Color Input from the RealSense. Other inputs are also visible.</p>
        </figcaption>
</figure>

After selecting the topic, you should be able to see the camera feed in RViz.</p>
<h2 id="changing-camera-settings">Changing Camera Settings</h2>
<figure>
    <img src="/tutorials/realsense/camparams.png"/> 
</figure>

<p>It is also possible to change camera settings and parameters, like resolution, framerate, image compression, etc. You can do this by editing the launchfile we used previously to launch the camera in the <code>~/catkin_ws/src/realsense2/realsense2_camera/launch/</code> directory. Make sure that it is not running when you do this. Open it with your text editor of choice and edit the parameters in the .launch file.</p>

        </div>
      </div>
    </div>
  </div>
</div>
<div class="strip strip-primary-gradient-top-bottom">
  <div class="container pt-3 pb-3 pt-md-6 pb-md-3 px-2">
    <div class="row justify-content-left citation-row">
        <h1 id="citation">Citation</h1>
        <p>If you plan to use any part of the the MuSHR platform, including tutorials, codebase, or hardware instructions for a project or paper, please cite 
        <em><a href="https://arxiv.org/abs/1908.08031">MuSHR: A Low-Cost,
        Open-Source Robotic Racecar for Education and Research
        </a></em>:</p></font>
        <div class="highlight"><pre class="chroma">@article{srinivasa2019mushr,
 title={{M}u{SHR}: {A} Low-Cost, Open-Source Robotic Racecar for Education and Research},
 author={Srinivasa, Siddhartha S. and Lancaster, Patrick and Michalove, Johan and Schmittle, Matt and Summers, Colin and Rockett, Matthew and Smith, Joshua R. and Chouhury, Sanjiban and Mavrogiannis, Christoforos and Sadeghi, Fereshteh},
 journal={CoRR},
 volume={abs/1908.08031},
 year={2019}
}
</pre></div>
        <p><br></p>
    </div>
  </div>
</div>


  </div>

  <div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="footer-inner">
          <h3 class="footer-title">MuSHR: The UW Open Racecar Project</h3>
          <ul>
            
            
            <li class="menu-item-home">
              <a href="/">
                Home
              </a>
            </li>
            
            <li class="menu-item-community forum">
              <a href="https://spectrum.chat/mushr">
                Community Forum
              </a>
            </li>
            
            <li class="menu-item-contact">
              <a href="/contact/">
                Contact
              </a>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            <li><strong>Email: </strong><a href="mailto:">
                </a></li>
          </ul>
          <ul>
            <li class="prl"><a href="https://personalrobotics.cs.washington.edu/">Made with <font color="#FF1690">â™¥</font> at the Personal Robotics Lab</a></li>
          </ul>
          <ul>
            <li class="prl">Website by <a href="http://johanam.com/"><font color="#36CDC4">Johan</font></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  

  




  <script type="text/javascript" src="/js/services.min.96db5a4d9a7ea2d1759fd6847940367b5207c4ef5686df932179e04aefccdf37.js"></script>
  


  
  <script type="text/javascript" src="/js/scripts.min.bf1e1f7ae8e03db5f012356e825843facdff51c0a559cb0d27fe2bbe1db405c2.js"></script>
  

  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-146151202-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());
  gtag('config', 'UA-146151202-1');
</script>




</body>

</html>